# ICMES

## 业务开发常见问题

| Q | A |
| :-: | :-: |
| 自定义`button`组件前置后置按钮 | 使用 `iconify` 图标，格式为 `ant-design:` + 图标名。参考 [组件](/src/views/archives/powerCutConfig/operationTicket/components/stepForm.vue) |
| `select` 组件搜索功能查到的结果不对 | 是因为 antd 默认查找的是`value`的值，添加`optionFilterProp: 'label'`按照 label 查找，如果重定向了 `label`注意替换为重定向的字段 |
| `treeSelect` 组件搜索功能查到的结果不对 | 原因同上，添加`treeNodeFilterProp: 'label'`按照 label 查找，如果重定向了 `label`注意替换为重定向的字段 |
| 表格嵌套表单提交 | 参考[停送电配置 >> 高压操作票 >> 配置步骤](/src/views/archives/powerCutConfig/operationTicket/index.vue) |
| 上传图片 | 参考[停送电配置 >> 供电系统图 >> 新建编辑](/src/views/archives/powerCutConfig/powerSystemList/editModal.vue) |
| ApiSelect 无默认值时，初次选择导致表单检验错误 | 增加`itemProps: { validateTrigger: 'blur' }`配置,参考[新建停送电申请单](src/views/powerFailure/editPowerCutData.ts) |
| ApiSelect 远程请求选项，需要对结果进行处理时，使用 `onOptionsReady`方法进行处理。**注意: 操作结果必须可以直接返回原数组，如果需要过滤等操作，可以使用 `lodash`函数进行处理** | 参考[新建商品煤检测](/src/views/qualityManage/commodityCoalDetection/data.ts) |
| 表格删除功能，弹出框样式不正常 | 修改 popConfirm 组件位置可以规避此问题，参考[商品煤检测](/src/views/qualityManage/commodityCoalDetection/index.vue) |

CssSyntaxError: /Users/singledogno.1/workspace/icmes-web-vue3/assets/index.b100b8b9.js-unocss-hash.css:1:2527: Unknown word at Input.error (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/input.js:148:16) at Parser.unknownWord (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/parser.js:540:22) at Parser.other (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/parser.js:164:12) at Parser.parse (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/parser.js:72:16) at parse (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/parse.js:11:12) at new LazyResult (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/lazy-result.js:133:16) at Processor.process (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/postcss@8.4.16/node_modules/postcss/lib/processor.js:28:14) at compileCSS (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/vite@2.9.15_less@4.1.3/node_modules/vite/dist/node/chunks/dep-689425f3.js:37465:10) at async Object.transform (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/vite@2.9.15_less@4.1.3/node_modules/vite/dist/node/chunks/dep-689425f3.js:37010:55) at async applyCssTransform (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/@unocss+vite@0.44.7_vite@2.9.15/node_modules/@unocss/vite/dist/index.cjs:228:20) at async Object.renderChunk (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/@unocss+vite@0.44.7_vite@2.9.15/node_modules/@unocss/vite/dist/index.cjs:311:15) at async Chunk.render (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:15044:20) at async /Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:15943:40 at async Promise.all (index 0) at async Bundle.addFinalizedChunksToBundle (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:15941:9) at async Bundle.generate (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:15921:13) at async /Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:23833:27 at async catchUnfinishedHookActions (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/rollup@2.79.1/node_modules/rollup/dist/shared/rollup.js:23247:20) at async doBuild (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/vite@2.9.15_less@4.1.3/node_modules/vite/dist/node/chunks/dep-689425f3.js:41726:20) at async build (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/vite@2.9.15_less@4.1.3/node_modules/vite/dist/node/chunks/dep-689425f3.js:41552:16) at async CAC.<anonymous> (/Users/singledogno.1/workspace/icmes-web-vue3/node_modules/.pnpm/vite@2.9.15_less@4.1.3/node_modules/vite/dist/node/cli.js:738:9)
